<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dona Neide Marmitaria - Sistema</title>

<style>
body{
    font-family: Arial;
    background:#f4f6f9;
    margin:0;
}

header{
    background:#c0392b;
    color:white;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
}

.container{
    max-width:500px;
    margin:20px auto;
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

select,input,textarea{
    width:100%;
    padding:10px;
    margin:6px 0;
    border-radius:6px;
    border:1px solid #ccc;
}

button{
    width:100%;
    padding:12px;
    background:#27ae60;
    color:white;
    border:none;
    border-radius:6px;
    font-weight:bold;
    margin-top:10px;
}

.admin-btn{
    background:#34495e;
}

.total{
    font-weight:bold;
    text-align:center;
    margin:10px 0;
    font-size:18px;
}

.painel{
    display:none;
}
.card{
    background:#ecf0f1;
    padding:10px;
    margin:8px 0;
    border-radius:6px;
}
</style>
</head>

<body>

<header>Dona Neide Marmitaria üçõ</header>

<div class="container" id="pedido">

<input type="text" id="nome" placeholder="Nome">

<input type="text" id="endereco" placeholder="Endere√ßo">

<select id="tamanho" onchange="calcular()">
<option value="">Tamanho</option>
<option value="13.5">P - 13,50</option>
<option value="16.5">M - 16,50</option>
<option value="19.5">G - 19,50</option>
</select>

<select id="bebida" onchange="calcular()">
<option value="0">Sem bebida</option>
<option value="5">Refri lata +5</option>
<option value="8">Refri 2L +8</option>
</select>

<select id="localidade" onchange="calcular()">
<option value="">Entrega</option>
<option value="0">Zona Leste</option>
<option value="7">Outra localidade +7</option>
</select>

<select id="pagamento">
<option>Pagamento</option>
<option>Pix</option>
<option>Dinheiro</option>
<option>Cart√£o</option>
</select>

<div class="total" id="total">Total: R$ 0,00</div>

<button onclick="finalizar()">Fazer Pedido</button>
<button class="admin-btn" onclick="abrirPainel()">Painel Administrativo</button>

</div>

<div class="container painel" id="painel">

<h3>üìä Painel Administrativo</h3>

<p><strong>Total vendido hoje:</strong> R$ <span id="totalDia">0</span></p>
<p><strong>Pedidos hoje:</strong> <span id="qtdPedidos">0</span></p>

<div id="listaPedidos"></div>

<button onclick="fecharPainel()">Voltar</button>

</div>

<script>
let senhaAdmin = "1234";
function calcular(){
let t = parseFloat(tamanho.value)||0;
let b = parseFloat(bebida.value)||0;
let l = parseFloat(localidade.value)||0;
let total = t+b+l;
document.getElementById("total").innerText = "Total: R$ " + total.toFixed(2);
}
function finalizar(){

let totalTexto = document.getElementById("total").innerText;

if(totalTexto === ""){
    alert("Calcule o pedido primeiro!");
    return;
}

let total = parseFloat(totalTexto.replace("Total: R$ ", ""));

let pedido = {
    nome: nome.value,
    endereco: endereco.value,
    total: total,
    data: new Date().toLocaleDateString()
};

let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
pedidos.push(pedido);
localStorage.setItem("pedidos", JSON.stringify(pedidos));

let msg = `Ol√°, meu nome √© ${pedido.nome}
Pedido realizado.
Total: R$ ${pedido.total.toFixed(2)}
Endere√ßo: ${pedido.endereco}`;

window.open("https://wa.me/5569992509281?text=" + encodeURIComponent(msg));

alert("Pedido salvo com sucesso!");

}
nome:nome.value,
endereco:endereco.value,
total:total,
data:new Date().toLocaleDateString()
};

let pedidos=JSON.parse(localStorage.getItem("pedidos"))||[];
pedidos.push(pedido);
localStorage.setItem("pedidos",JSON.stringify(pedidos));

let msg=`Ol√°, meu nome √© ${pedido.nome}
Pedido realizado.
Total: R$ ${pedido.total.toFixed(2)}
Endere√ßo: ${pedido.endereco}`;

window.open("https://wa.me/5569992509281?text="+encodeURIComponent(msg));
}

function abrirPainel(){

let senha = prompt("Digite a senha do administrador:");

if(senha === senhaAdmin){
    pedido.style.display="none";
    painel.style.display="block";
    carregarPainel();
}else{
    alert("Senha incorreta!");
}

}

function fecharPainel(){
painel.style.display="none";
pedido.style.display="block";
}

function carregarPainel(){

let pedidos=JSON.parse(localStorage.getItem("pedidos"))||[];
let hoje=new Date().toLocaleDateString();

let total=0;
let qtd=0;
listaPedidos.innerHTML="";

pedidos.forEach(p=>{
if(p.data==hoje){
total+=p.total;
qtd++;
listaPedidos.innerHTML+=`
<div class="card">
Nome: ${p.nome}<br>
Total: R$ ${p.total.toFixed(2)}
</div>`;
}
});

totalDia.innerText=total.toFixed(2);
qtdPedidos.innerText=qtd;
}

</script>

</body>
</html>
